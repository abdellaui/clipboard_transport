<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>clipboard transport</title>
    <style>
        html,
        body {
            margin: 0px;
            background: #222;
            font-family: sans-serif;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        .content {
            max-width: 1000px;
            padding: 15px;
            margin: 25px auto;
            background: #fff;
            border: 1px solid #999;
            border-radius: 3px;
        }
    </style>
</head>

<body>
    <div class="content">
        <meta http-equiv="content-type" content="text/html; charset=utf-8"><div id="answer-13354482" class="answer accepted-answer" data-answerid="13354482" itemprop="acceptedAnswer" itemscope="" itemtype="http://schema.org/Answer"><div class="post-layout"><div class="post-layout--right"><div id="comments-link-13354482" data-rep="50" data-anon="true"><a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></a>
                
            
        </div>         
    </div>    </div>
</div>

  
<a name="12499670"></a>
<div id="answer-12499670" class="answer" data-answerid="12499670" itemprop="suggestedAnswer" itemscope="" itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            

<div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="12499670">
        </div></div></div></div><div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="9">9</div>
        <div class="votecell post-layout--left"><div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="12499670">


</div>

        </div>

        


<div class="answercell post-layout--right">
        
    <div class="post-text" itemprop="text">
<p>I'd say there's no simple way of doing it, where simple means <em>"just add 1-2 lines that will write the additional header and keep the existing functionality"</em>. So, the best solution would be to subclass the <code>SimpleHTTPRequestHandler</code> class and re-implement the functionality, with the addition of the new header.</p>

<p>The problem behind why there is no simple way of doing this can be observed by looking at the implementation of the <code>SimpleHTTPRequestHandler</code> class in the Python library: <a href="http://hg.python.org/cpython/file/19c74cadea95/Lib/http/server.py#l654">http://hg.python.org/cpython/file/19c74cadea95/Lib/http/server.py#l654</a></p>

<p>Notice the <code>send_head()</code> method, particularly the lines at the end of the method which send the response headers. Notice the invocation of the <code>end_headers()</code>
 method. This method writes the headers to the output, together with a 
blank line which signals the end of all headers and the start of the 
response body: <a href="http://docs.python.org/py3k/library/http.server.html#http.server.BaseHTTPRequestHandler.end_headers">http://docs.python.org/py3k/library/http.server.html#http.server.BaseHTTPRequestHandler.end_headers</a></p>

<p>Therefore, it would not be possible to subclass the <code>SimpleHTTPRequestHandler</code> handler, invoke the super-class <code>do_GET()</code> method, and then just add anoth</p></div></div>
    </div>
    <script>
        var remember = "";
        var interval = undefined;
        var check = function (data) {
            if (remember != "" && data != remember) {
                window.clearInterval(interval);
                window.location.reload();
            }
            remember = data;
        };

        var getdata = function () {
            // avoid caching
            var url = window.location.protocol + "//" + window.location.hostname + "/?time=" + Date.now();
            fetch(url, { mode: 'cors' }).then(data => {
                data.text().then(text => {
                    check(text)
                });

            }).catch(e => {
                console.log(e);
            });
        };

        (function () {
            interval = window.setInterval(getdata, 1000);
        })();
    </script>
</body>

</html>